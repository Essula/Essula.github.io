<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FullScreen API</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="main.css">
    <style>
        .big{
            background-color: #bada55;
            color: white;
        }
    </style>
</head>
<body>
    <header>
        <h1>First Heading</h1>
        <video id="vid" controls></video>
        <audio id="aud" controls></audio>
    </header>
    <script>
        /****
        List of prefixed versions of props
        https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API#Prefixing
        ****/
        
        let fschange = (document.onwebkitfullscreenchange)? 'onwebkitfullscreenchange':(document.onfullscreenchange)?
        'onfullscreenchange': (document.onmozfullscreenchange)?
        'onmozfullscreenchange': (document.MSFullScreenChange)?
        'MSFullscreenChange': null;
        if(fschange){
            document[fschange] = toggleFull;
        }
        
        let h1 = document.querySelector('h1');
        let vid = document.querySelector('#vid');
        let aud = document.querySelector('#aud');
        
        h1.addEventListener('click', goBig);
        vid.addEventListener('click', goBig);
        aud.addEventListener('click', goBig);
        
        h1.addEventListener('dblclick', goHome);
        vid.addEventListener('dblclick', goHome);
        aud.addEventListener('dblclick', goHome);
        
        function goBig(ev){
            let element = ev.currentTarget;
            console.dir(element);
            if(! document.webkitFullscreenElement){
                if(element.webkitRequestFullscreen){
                    element.webkitRequestFullscreen();
                }else{
                    console.log('element cannot be fullscreened');
                }
            }else{
                console.log(document.webkitFullscreenElement, 'is the full screen element');
            }
        }
        
        function goHome(ev){
            let element = ev.target;
            console.log(element)
            element.classList.remove('big');
            if( document.webkitFullscreenEnabled){
                document.webkitExitFullscreen();
            }   
        }
        
        function toggleFull(ev){
            let element = document.webkitFullscreenElement;
            if(element){
                element.classList.add('big');
                console.log('big class added')
            }else{
                //remove it from the first element with it
                element = document.querySelector('h1.big, audio.big, video.big');
                element.classList.remove('big');
                //when people use esc instead of dblclick
            }
        }
    </script>
</body>
</html>